#include "test_sort.h"
#include "lib/sort.h"
#include <rom.h>

char cmpu8(uint8_t *p1,uint8_t *p2)
{
  if(*p1<*p2)
    return -1;
  if(*p1>*p2)
    return 1;
  return 0;
}

char cmpu16(uint16_t *p1,uint16_t *p2)
{
  if(*p1<*p2)
    return -1;
  if(*p1>*p2)
    return 1;
  return 0;
}

#define VEC_SIZE 200u
uint16_t x[VEC_SIZE];    

ROMF_DATA16(xrom,\
8742,8180,7067,3567,6451,8731,2530,1619,5010,795,8098,3732,2901,462,5166,8745,7661,2280,7159,6042,2840,2500,898,\
6719,1690,8423,2982,4448,6893,8405,1953,8872,5704,175,5963,7902,4888,6133,3471,1975,1265,3676,940,9326,1325,7191,\
7770,1212,9821,1477,7027,8665,5928,7992,1021,3203,8819,8079,9484,7867,7191,9665,855,5730,3213,1494,6102,863,8611,\
4341,5574,1289,6962,2166,8324,4654,2993,7460,2611,2951,6553,49,8470,3904,2184,8006,9337,637,2961,9484,5173,9953,\
3009,3467,8792,6518,7048,3644,7887,1265,181,9997,9089,6628,2120,1558,5704,5354,4420,3096,3580,1842,3971,5662,8611,\
4032,2853,9187,7030,1104,2167,1564,1419,9017,7636,9782,369,5213,3161,8763,7049,743,9259,5478,8452,9931,8720,6173,\
7929,1821,4729,304,9418,8532,3644,9575,4525,7673,3324,4530,3489,2770,8859,4768,2756,7004,4691,3715,6793,3623,5208,\
1894,6130,4422,8074,4218,621,8747,9059,2251,4075,2809,6623,8575,1996,9509,5431,5986,5536,4501,4022,5432,7517,8345,\
2868,453,6277,5254,9479,5192,3080,2397,3871,802,4348,2740,3265,7477,3932,2753,5659,4078,8997,8062,2051,2785,3720,\
5200,2604,2880,8039,8657,6155,2071,1848,3160,9136,5896,1,557,5594,6080,7394,1736,5025,9057,9873,6766,7571,1535,\
8516,8728,4542,7580,2845,71,9006,3362,3975,1845,5369,3628,7953,4004,17,9684,3853,9396,5009,2822,7706,4060,5220,\
6698,1595,7634,5857,6742,9379,242,745,763,497,8936,2125,2814,3848,5144,9099,9820,4992,2017,1740,6555,5614,4355,\
8213,414,8255,669,460,7230,8841,6698,8965,6238,7645,4364,9704,4904,2603,5687,8821,6944,4026,1628,9887,2279,1955,\
8007,7095,3881,1700,1180,2843,7450,2780,557,7988,6918,2041,3747,9440,5092,9716,7681,9822,8674,8786,2751,4404,3357,\
4581,5433,284,9562,9049,7942,6752,1151,1385,5605,1812,1864,6227,6110,3325,8729,2188,55,2254,4006,9878,6397,3939,\
8395,2509,5849,3056,4523,7895,5475,9508,4137,2497,9994,24,8198,7391,7519,4215,9476,4447,8298,822,5906,9395,5515,\
4272,2705,4026,7951,8437,9261,2551,8404,9674,6831,1701,6899,4821,9175,9576,3786,8751,9800,3971,825,1745,3640,8410,\
2895,5440,3548,6795,2536,4418,7747,2325,5088)

void test_sort_preparevec()
{
    uint16_t i;
    for(i = 0u; i < VEC_SIZE; i++)
      x[i] = xrom(i);
}

char test_sort_issorted()
{
  uint16_t i;
  for(i = 0; i < VEC_SIZE-1; i++)
    if(x[i] > x[i+1])
      return 0;
  return 1;
}

char test_sort()
{
  uint16_t i;  


  test_sort_preparevec();
  bsort(x,VEC_SIZE,sizeof(uint16_t),(bsort_cmp)cmpu16); 
  if(!test_sort_issorted()) 
    return 1; 
  
  test_sort_preparevec();
  csort(x,VEC_SIZE,sizeof(uint16_t),(bsort_cmp)cmpu16); 
  if(!test_sort_issorted()) 
    return 2;
    
  test_sort_preparevec();
  ssort(x,VEC_SIZE,sizeof(uint16_t),(bsort_cmp)cmpu16); 
  if(!test_sort_issorted()) 
    return 3;
  
  return 0;
}
